create type user_role as enum ('OPERATOR', 'SUPERVISOR', 'SUPERADMIN');
create type user_status as enum ('ACTIVE', 'DEACTIVATED', 'DELETED');

create table users (
	id serial primary key,
	first_name varchar(90),
	last_name varchar(90),
	email varchar unique not null,
	role user_role not null,
	profile_photo varchar,
	active_time numeric(5,2),
	quality_assurance numeric(5,2),
	processing_speed numeric(5,2),
	knowledge_quality numeric(5,2),
	total_kpi numeric(5,2),
	status user_status default('ACTIVE'),
	pass varchar,
	salt varchar,
	next_shift_at timestamp,
	start_work_at timestamp,
	created_at timestamp,
	updated_at timestamp
);

create table ranking_table(
	id serial primary key,
	user_id int references users(id),
	rank_position int,
	created_at timestamp,
	updated_at timestamp
);

create table events(
	id serial primary key,
	event_name varchar,
	event_description varchar,
	event_link varchar,
	event_date_time timestamp,
	facilitator_id int references users(id),
	created_at timestamp,
	updated_at timestamp
);

create table events_to_users (
	id serial primary key,
	event_id int references events(id),
	user_id int references users(id),
	created_at timestamp default now(),
    updated_at timestamp
);

create table tokens(
    id serial primary key,
    user_id int references users(id),
    access_token varchar,
    refresh_token varchar,
    expired boolean,
    access_expires_at timestamp,
    refresh_expires_at timestamp,
    created_at timestamp default now(),
    updated_at timestamp
);

create table tests (
	id serial primary key,
	test_type test_type not null,
	questions text not null,
	correct_answers text not null,
	expired_at timestamp not null,
	created_at timestamp default now(),
    updated_at timestamp
);